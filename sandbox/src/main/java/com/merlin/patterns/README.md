# 设计模式
## 创建型模式
### 1-抽象工厂模式Abstract Factory
### 2-生成器模式 Builder
### 3-工厂方法模式 Factory Method
### 4-原型模式 Prototype
### 5-单例模式 Singleton

## 结构型模式
### 1-适配器模式 Adapter
### 2-桥接模式 Bridge
### 3-组合模式 Composite
### 4-容器模式
### 修饰模式 Decorator
### 扩展性模式
### 外观模式
### 享元模式
### 管道和过滤器模式
### 代理模式（静态代理vs动态代理）
动态代理: 参考AOP, Mybatis Mapper也是基于动态代理实现的
静态代理：。。。
 
## 行为型模式
### *责任链模式 Chain of Responsibility
责任链模式是一种对象的行为模式。在责任链模式里，很多对象由每一个对象对其下家的引用而连接起来形成一条链。请求在这个链上传递，直到链上的某一个对象决定处理此请求。发出这个请求的客户端并不知道链上的哪一个对象最终处理这个请求，这使得系统可以在不影响客户端的情况下动态地重新组织和分配责任。
Tomcat中的Filter就是使用了责任链模式，创建一个Filter除了要在web.xml文件中做相应配置外，还需要实现javax.servlet.Filter接口。
### 命令模式
### 迭代器模式
### 中介者模式
### 备忘录模式
### 观察者模式
### 状态模式
### 策略模式
### 模版方法
### 访问者模式
### Mediator 调节者
https://en.wikipedia.org/wiki/Mediator_pattern#Java

## *AOP(面向切面编程)
面向切面编程，指扩展功能不修改源代码，将功能代码从业务逻辑代码中分离出来。
- 主要功能：日志记录，性能统计，安全控制，事务处理，异常处理等等。
- 主要意图：将日志记录，性能统计，安全控制(如鉴权等)，事务处理，异常处理等代码从业务逻辑代码中划分出来，通过对这些行为的分离，希望可以将它们独立到非指导业务逻辑的方法中，进而改变这些行为的时候不影响业务逻辑的代码。

AOP底层使用动态代理实现。包括两种方式：
1. 使用JDK动态代理实现。
2. 使用cglib来实现

JDK动态代理实现：只能对实现了接口的类生成代理，而不是针对类，该目标类型实现的接口都将被代理。原理是通过在运行期间创建一个接口的实现类来完成对目标对象的代理。
CGLIB动态代理: 针对类实现代理，对是否实现接口无要求。原理是对指定的类生成一个子类，覆盖其中的方法，因为是继承，所以被代理的类或方法最好不要声明为final类型。
1. CGLIB（Code Generation Library)是一个基于ASM的字节码生成库，它允许我们在运行时对字节码进行修改和动态生成。CGLIB通过继承方式实现代理。
1. 使用cglib需要引入cglib的jar包，如果你已经有spring-core的jar包，则无需引入，因为spring中包含了cglib。
1. cglib代理无需实现接口，通过生成类字节码实现代理，比反射稍快，不存在性能问题，但cglib会继承目标对象，需要重写方法，所以目标对象不能为final类

Java原生动态代理类和Cglib的区别
1. JDK动态代理是实现了被代理对象的接口，Cglib是继承了被代理对象。（JDK 动态代理，JDK 动态代理的类必须实现一个接口，而且生成的代理类是其接口的实现类，也就是被代理的类的兄弟类，由JDK内部实现；CGLib代理的类，无需强制实现接口，其生成的代理类 是 被代理类的子类，并且重写的被代理类的方法，而且需要额外的引入Jar。意即：有接口(Interface)用jdk的，没有接口用cglib）
2. JDK和Cglib都是在运行期生成字节码，JDK是直接写Class字节码，Cglib使用ASM框架写Class字节码，Cglib代理实现更复杂，生成代理类比JDK效率低。
3. JDK调用代理方法，是通过反射机制调用，Cglib是通过FastClass机制直接调用方法，Cglib执行效率更高。Cglib底层将方法全部存入一个数组中，通过数组索引直接进行方法调用
4. 代理类将被代理类作为自己的父类并为其中的非final委托方法创建两个方法，一个是与委托方法签名相同的方法（重写机制），它在方法中会通过super调用委托方法；另一个是代理类独有的方法。在代理方法中，它会判断是否存在实现了MethodInterceptor接口的对象，若存在则将调用intercept方法对委托方法进行代理

## 参考
- [GoF的23种设计模式](http://c.biancheng.net/view/1320.html)
- [手写Spring](https://gper.club/articles/7e7e7f7ff0g52gce)